安全知识概要（三）
===

###（一）数字签名
####（1）概念
数字签名（又称公钥数字签名、电子签章）是一种类似写在纸上的普通的物理签名，但是使用了公钥加密领域的技术实现，用于鉴别数字信息的方法。一套数字签名通常定义两种互补的运算，一个用于签名，另一个用于验证。  
数字签名，就是只有信息的发送者才能产生的别人无法伪造的一段数字串，这段数字串同时也是对信息的发送者发送信息真实性的一个有效证明。
####（2）原理
**发送方**：对原文用HASH函数生成一个摘要信息，再利用私钥加密生成签名信息，附带在原文中发送给接收方。  
**接收方**：接收到原文和签名信息，用公钥解密得到摘要信息，再对原文用HASH函数生成一个摘要信息，对比两个摘要信息是否相同，确定是否来自正确的发送方。  
只要确保发送方私钥不丢失，就可以确定信息确实来自指定发送方并且未篡改。
####（3）应用场景分析
A 跟 B 借200元，在网络上写借条，B 担心 A 赖账，A 担心写了借条 B 随意修改成其他金额，通过数字签名解决。  
文字内容"向B借200元"，A 用自己的私钥生成签名，连同原文发给 B。  
B 收到后用公钥解密签名，再对"向B借200元"生成签名，两个结果一致，但 B 也无法修改金额重新签名，因为只有A的私钥才可以生成A自己专有的签名。

###（二）数字证书
在非对称加密中，用户获取到的公钥有可能并非正常的公钥，也有可能获取后被替换，确保获取到正确的公钥需要采用数字证书。
####（1）概念
数字证书是一个经证书授权中心数字签名的包含公开密钥拥有者信息以及公开密钥的文件。  
目前数字证书是由权威公正的第三方机构，即CA（例如中国各地方的CA公司）中心签发的证书，也可以由企业级CA系统进行签发。  
根证书：证书其实包含三部分，用户的信息，用户的公钥，还有CA中心对该证书里面的信息的签名。根证书用来验证CA的签名。
####（2）颁发过程
用户首先产生自己的密钥对，并将公共密钥及部分个人身份信息传送给认证中心。认证中心在核实身份后，将执行一些必要的步骤，以确信请求确实由用户发送而来，然后，认证中心将发给用户一个数字证书，该证书内包含用户的个人信息和他的公钥信息，同时还附有认证中心的签名信息。用户就可以使用自己的数字证书进行相关的各种活动。
####（3）证书格式
数字证书的格式普遍采用的是X.509V3国际标准，一个标准的X.509数字证书包含以下一些内容：  
证书的版本信息；  
　　证书的序列号，每个证书都有一个唯一的证书序列号；   
　　证书所使用的签名算法；  
　　证书的发行机构名称，命名规则一般采用X.500格式；  
　　证书的有效期，通用的证书一般采用UTC时间格式，它的计时范围为1950-2049；  
　　证书所有人的名称，命名规则一般采用X.500格式；  
　　证书所有人的公开密钥；  
　　证书发行者对证书的签名。  
浏览器自带了市面上正规的 CA 证书中心的根证书公钥。
###（三）公钥和私钥
公钥和私钥都可以用来加密或解密---只要能保证用A加密，就用B解密就行。  
至于A是公钥还是私钥，其实可以根据不同的用途而定。

例如说，如果A发消息给B，A就可以用公钥加密。因为只有B知道他的私钥，所以这消息也就只有他本人能解开，于是你就达到了你的目的。

但是如果A想发布一个公告，需要一个手段来证明这确实是你本人发的，而不是其他人冒名顶替的。那可以在公告开头或者结尾附上一段用你的私钥加密的内容，其他人都可以用你的公钥来解密，看看解出来的内容是不是相符的。如果是的话，那就说明这公告确实是你发的---因为只有你的公钥才能解开你的私钥加密的内容，而其他人是拿不到你的私钥的。